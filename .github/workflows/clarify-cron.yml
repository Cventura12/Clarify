name: Clarify Scheduler

on:
  schedule:
    - cron: "0 * * * *"
  workflow_dispatch:

jobs:
  run-scheduler:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger scheduler
        env:
          APP_BASE_URL: ${{ secrets.APP_BASE_URL }}
          CRON_TOKEN: ${{ secrets.CRON_TOKEN }}
        run: |
          if [ -z "$APP_BASE_URL" ] || [ -z "$CRON_TOKEN" ]; then
            echo "Missing APP_BASE_URL or CRON_TOKEN secret."
            exit 1
          fi
          curl -sS -H "x-cron-token: $CRON_TOKEN" "$APP_BASE_URL/api/scheduler/run"
